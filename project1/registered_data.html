<html>
    <head>
        <title>Registered Users List</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <!--meta http-equiv="refresh" content="30"-->
    </head>
    <body>
        <div class="inner">
            <div class="image-holder">
                <img src="/photos/logo_black.png" alt="" width="200">
                <b>Registered Details of users with Feedback</b>
            </div>
        <table class = "table">
            <thead>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Mobile Number</th>
                <th>DOB</th>
                <th>Email</th>
                <th>Gender</th>
                <th>Feedback</th>
            </thead>
            <tbody id="tbody1">
            </tbody>
        </table>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1-0/firebase.js"></script>
        
        <script id="dataScript">
            const firebaseConfig =  {
                apiKey: "AIzaSyCYasxjoaQ3ZZGqC0RZ39voqJLIyshTh5s",
                authDomain: "feel-yourself-heal.firebaseapp.com",
                databaseURL: "https://feel-yourself-heal-default-rtdb.firebaseio.com",
                projectId: "feel-yourself-heal",
                storageBucket: "feel-yourself-heal.appspot.com",
                messagingSenderId: "1071617627465",
                appId: "1:1071617627465:web:38746fbc5e39ba07fbf698",
                measurementId: "G-HW8MF3R2CJ"
            };
            // initialize firebase
            firebase.initializeApp(firebaseConfig);


        function SelectAllData(){
            firebase.database().ref('feedback_registration').once('value',
            function(AllRecords){
                AllRecords.forEach(
                    function(CurrentRecord){
                        var first_name = CurrentRecord.val().first_name;
                        var last_name = CurrentRecord.val().last_name;
                        var mobile_number = CurrentRecord.val().mobile_number;
                        var dob = CurrentRecord.val().dob;
                        var email = CurrentRecord.val().email;
                        var gender = CurrentRecord.val().gender;
                        var feedback = CurrentRecord.val().feedback;
                        AddItemsToTable(first_name, last_name, mobile_number, dob ,email, gender, feedback);
                    }
                );
            });
        }

        window.onload = SelectAllData; //event occur

        function AddItemsToTable(first_name, last_name, mobile_number, dob ,email, gender, feedback){
            var tbody = document.getElementById('tbody1');
            var trow = document.createElement('tr');
            var td1 = document.createElement('td');
            var td2 = document.createElement('td');
            var td3 = document.createElement('td');
            var td4 = document.createElement('td');
            var td5 = document.createElement('td');
            var td6 = document.createElement('td');
            var td7 = document.createElement('td');
            td1.innerHTML = first_name;
            td2.innerHTML = last_name;
            td3.innerHTML = mobile_number;
            td4.innerHTML = dob;
            td5.innerHTML = email;
            td6.innerHTML = gender;
            td7.innerHTML = feedback;
            trow.appendChild(td1);
            trow.appendChild(td2);
            trow.appendChild(td3);
            trow.appendChild(td4);
            trow.appendChild(td5);
            trow.appendChild(td6);
            trow.appendChild(td7);
            tbody.appendChild(trow);
        }
    </script>

    </body>
</html>